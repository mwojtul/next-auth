import { join } from "path"
import { readdirSync, writeFileSync } from "fs"

const providersPath = join(process.cwd(), "src/providers")

const files = readdirSync(providersPath, "utf8")

const providers = files.map((file) => {
  const strippedProviderName = file.substring(0, file.indexOf("."))
  return `"${strippedProviderName}"`
}).filter((provider) => provider !== '"oauth-types"' && provider !== '"index"')

const result = `
// THIS FILE IS AUTOGENERATED. DO NOT EDIT.
export type OAuthProviderType = 
  | ${providers.join("\n  | ")}`

writeFileSync(join(providersPath, "oauth-types.ts"), result)
